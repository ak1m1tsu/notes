## Определение

Индекс - это структура данных, которая организует данные таким образом, чтобы обеспечить более быстрый поиск и извлечение записей на основе определенных критериев.

При создании индекса СУБД создает отдельную структуру, содержащую подмножество данных из таблицы вместе со ссылкой на расположение полной записи данных.

Создавая индекс для одного или нескольких столбцов, БД может быстрой найти соответствующие записи при выполнении запроса,который ссылается на эти столбцы.

Однако создание слишком большого кол-во индексов также может снизить производительность БД, поскольку СУБД приходится тратить больше времени на обновление структур индексов всякий раз, когда добавляются новые данные или обновляются существующие данные.

## Виды индексов

Выделяют несколько видов индексов:

- B-tree индекс
- Hash индекс
- Bitmap индекс
- Clustered индекс
- Non-clustered индекс

### B-tree индекс

***B-tree*** индекс - тип древовидной структуры данных, который чаще всего используется в реляционных БД. Он организует данные в иерархическую структуру, где каждый узел представляет диапазон значений из индексированного столбца (столбцов). 

Этот индекс поддерживает как запросы на равенство, так и запросы диапазона, что делает их подходящими для широкого круга запросов.

В ***B-tree*** индексе листья содержат фактические значения данных, а узлы содержат указатели на другие узлы в дереве.

### Hash индекс

***Хэш-индекс*** - тип индекса БД, который использует хеш-функцию для сопоставления значений данных с определенным местоположениями в индексе. Это делает его очень быстрым для запросов точного соответствия, но не подходит для запросов диапазона.

Данный индекс можно использовать в:

- Столбцах, содержащих уникальные значения. Поскольку хеш-функция является детерминированной, т.е. гарантирует, что каждое значение отображается в уникальное место в индексе. Это делает его очень эффективным для запросов, требующих точного совпадения.
- Операциях соединения, когда соединение основано на сравнении на равенство. Хеш-функцию можно использовать для хеширования ключей соединения из обеих таблиц, а полученные хеш-значения можно сравнивать для определения совпадающих строк.
- Поиске включающего точные совпадения. Например, если есть таблица пользователей и нужно найти пользователя по его адресу электронной почты, хеш-индекс будет очень эффективным.
- Столбцах с небольшим кол-вом уникальных значений. Если столбец имеет большое кол-во различных значений, хеш-функция может привести к коллизиям, что может снизить эффективность индекса.
- Кешировании часто используемых данных. Например, если есть веб-приложение, которому необходимо часто искать пользовательские данные, можно использовать хеш-индекс для кэширования этих данных в памяти.

### Bitmap индекс

***Bitmap*** индекс - специальный тип индекса, используемый для столбцов с небольшим количеством различных значений. Он использует растровое изображения для представления на наличие или отсутствие каждого значения в столбце. Это делает его очень быстрым для таких типов запросов как, запросы, которые используют оператор `OR` или оператор `AND`.

***Bitmap*** индексы можно использовать для определенных типов запросов диапазона, но как правило, они не так эффективны, как индексы ***B-tree*** для этих запросов.

### Clustered индекс

***Clustered*** индекс - тип индекса, который физически переупорядочивает данные в таблице на основе индексированного столбца (столбцов). Это означает, что фактические данные хранятся в том же порядке, что и индекс, что делает их очень быстрыми для запросов, использующих индексированные столбцы. 

***Clustered*** индексы особенно полезны для таблиц, который часто запрашиваются с использованием определенного столбца или набора столбцов.

### Non-clustered индекс

***Non-clustered*** индекс создает отдельную структуру для хранения данных индекса, оставляя данные базовой таблицы в исходном порядке. Это делает его полезным для таблиц, которые часто запрашиваются с использованием различных столбцов.

Их также можно использовать для операций `JOIN`, но они, как правило, не так эффективны, как ***Clustered*** индексы для запросов, использующих индексированные столбцы.

Эти индексы часто используются вместе с ***Clustered*** индексами для повышения производительности запросов.