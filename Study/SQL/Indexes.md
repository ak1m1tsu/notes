Tags: #sql #database 

## Indexes

Исходная таблица (представим в ней 12 млн строк)

|id|name|subcategory|brand|category|price|
|--|--|--|--|--|--|
| 1| a| headphone| Sony | electronics| $280|
| 2| b| sneaker| Nike | shoes| $70|
| ...| ...| ...| ... | ...| ...|


```sql
SELECT COUNT(*) FROM product
WHERE category = "electronics";
```

> Без индексов такой запрос обработается, примерно за 3-4 секунды.

Индексация - это что-то вроде книжного содержания: не нужно перелистывать все страницы книги, чтобы найти нужную главу, а можно просто найти нужную страницу в содержании.

Индексация позволяет с помощью индекса быстрее найти в БД данные по запросу.

```sql
CREATE INDEX product_category_index
ON product (category);
```

> При первом запросе с созданным индексом, если его раньше не было, БД придется пройтись по всем строкам и создать этот индекс. Может занять достаточно долгое время
> После индексации, запрос выше будет обрабатываться, примерно за 300-400 миллисекунд

```sql
SELECT COUNT(*) FROM product
WHERE category = "electronics"
AND subcategory = "headphone";
```

