Нормализация - метод проектирования базы данных, который позволяет привести БД к минимальной избыточности.

## Зачем нужна нормализация БД

Избыточность данных создает предпосылки для появления различных аномалий, снижает производительность, и делает управление данных не гибким и не очень удобным.

Нормализация нужна для:

- Устранения аномалий
- Повышения производительности
- Повышения удобства управления данными

Избыточность данных - ситуация, когда одни и те же данные хранятся в нескольких местах базы, именно это и приводит к аномалиям.

## Процесс нормализации

Процесс нормализации: Следуя определенным правилам и соблюдая определенные требования, проектируем таблицы в базе данных. Правила группируются в наборы, и если база соответствует определенному набору правил, то она находится в определенной нормальной форме.

Процесс нормализации - последовательный процесс приведения базы данных к эталонному виду (переход от одной нормальной формы к следующей).

## Что такое нормальная форма БД

Нормальная форма базы данных - набор правил и критериев, которым должна отвечать БД.

## Какие нормальные формы существуют

Основные нормальные формы:

- Первая нормальная форма (1NF)
- Вторая нормальная форма (2NF)
- Третья нормальная форма (3NF)
- Четвертая нормальная форма (4NF)
- Пятая нормальная форма (5NF)

Дополнительные нормальные формы:

- Ненормализованная форма или нулевая нормальная норма (UNF)
- Нормальная форма Бойса-Кодда (BCNF)
- Доменно-ключевая нормальная форма (DKNF)
- Шестая нормальная форма (6NF)

### Первая нормальная форма (1NF)

Таблицы должны соответствовать реляционной модели данных и соблюдать определенные реляционные принципы:

- В таблице не должно быть дублирующих строк
- В каждой ячейке таблицы хранится атомарное значение (одно не составное значение)
- В столбце хранятся данные одного типа
- Отсутствуют массивы и списки в любом виде

### Вторая нормальная форма (2NF)

Таблицы должны соответствовать следующим требованиям:

- Таблицы должны находиться в 1NF
- Таблицы должны иметь ключ
- Все не ключевые столбцы таблицы должны зависеть от полного ключа (если ключ составной)

Ключ - столбец или набор столбцов, по которым гарантировано можно отличить строки друг от друга, т.е. ключ идентифицирует каждую строку таблицы. По ключу можно обратиться к конкретной строке данных в таблице

#### Не в NF2

| ФИО          | Должность   | Подразделение    | Описание подразделения                                                         |
| ------------ | ----------- |:---------------- |:------------------------------------------------------------------------------ |
| Иванов И.И.  | Программист | Отдел разработки | Разработка и сопровождение приложений и сайтов                                 |
| Сергеев С.С. | Бухгалтер   | Бухгалтерия      | Ведение бухгалтерского и налогового учета финансово-хозяйственной деятельности |
| John Smith   | Продавец    | Отдел реализации | Организация сбыта продукции                                                    |

#### В NF2

| Табельный номер | ФИО          | Должность   | Подразделение    | Описание подразделения                                                         |
|:--------------- | ------------ | ----------- |:---------------- |:------------------------------------------------------------------------------ |
| 1               | Иванов И.И.  | Программист | Отдел разработки | Разработка и сопровождение приложений и сайтов                                 |
| 2               | Сергеев С.С. | Бухгалтер   | Бухгалтерия      | Ведение бухгалтерского и налогового учета финансово-хозяйственной деятельности |
| 3               | John Smith   | Продавец    | Отдел реализации | Организация сбыта продукции                                                    |

### Третья нормальная форма (3NF)

Таблицы должны соответствовать следующим требованиям:

- Таблицы должны находиться в 2NF
- В таблицах должна отсутствовать транзитивная зависимость.

Транзитивная зависимость - ситуация, при которой не ключевые столбцы зависят от значений других не ключевых столбцов.

#### Не в NF3

| Табельный номер | ФИО          | Должность   | Подразделение    | Описание подразделения                                                         |
|:--------------- | ------------ | ----------- |:---------------- |:------------------------------------------------------------------------------ |
| 1               | Иванов И.И.  | Программист | Отдел разработки | Разработка и сопровождение приложений и сайтов                                 |
| 2               | Сергеев С.С. | Бухгалтер   | Бухгалтерия      | Ведение бухгалтерского и налогового учета финансово-хозяйственной деятельности |
| 3               | John Smith   | Продавец    | Отдел реализации | Организация сбыта продукции                                                    |

#### В NF3

| Табельный номер | ФИО          | Должность   | Подразделение |
| --------------- | ------------ | ----------- | ------------- |
| 1               | Иванов И.И.  | Программист | 1             |
| 2               | Сергеев С.С. | Бухгалтер   | 2             |
| 3               | John Smith   | Продавец    | 3             |

| Идентификатор подразделения | Подразделение    | Описание подразделения                                                         |
| --------------------------- | ---------------- | ------------------------------------------------------------------------------ |
| 1                           | Отдел разработки | Разработка и сопровождение приложений и сайтов                                 |
| 2                           | Бухгалтерия      | Ведение бухгалтерского и налогового учета финансово-хозяйственной деятельности |
| 3                           | Отдел реализации | Организация сбыта продукции                                                    |

### Четвертая нормальная форма (4NF)

Таблицы должны соответствовать следующим требованиям:

- Находиться в 3NF/BCNF
- Должны отсутствовать нетривиальные многозначные зависимости

#### Пример зависимости

Есть таблица со столбцами А, Б, В. При этом Б и В никак не связаны между собой, но по отдельности зависят от А, и для каждого значения А есть множество значений Б и множество значений В.

Получившиеся зависимости:
А --> Б
А --> В

#### Не в 4NF

| ID курса | Название курса |
| -------- | -------------- |
| 1        | SQL            |
| 2        | Python         |
| 3        | Web            |

| ID преподавателя | ФИО          |
| ---------------- | ------------ |
| 1                | Иванов И.И.  |
| 2                | Сергеев С.С. |
| 3                | John Smith   |

| ID аудитории | Название аудитории |
| ------------ | ------------------ |
| 1            | 101                |
| 2            | 203                |
| 3            | 305                |
| 4            | 407                |
| 5            | 502                |

| Курс   | Аудитория | Преподаватель |
| ------ | --------- | ------------- |
| SQL    | 101       | Иванов И.И.   |
| SQL    | 203       | Иванов И.И.   |
| Web    | 305       | Сергеев С.С.  |
| Python | 407       | John Smith    |
| Python | 502       | John Smith    |

> Многозначная зависимость.

#### В 4NF

| Курс   | Преподаватель |
| ------ | ------------- |
| SQL    | Иванов И.И.   |
| Web    | Сергеев С.С.  |
| Python | John Smith    |

| Курс   | Аудитория |
| ------ | --------- |
| SQL    | 101       |
| SQL    | 203       |
| Web    | 305       |
| Python | 407       |
| Python | 502       |


### Пятая нормальная форма (5NF)

Таблицы должны соответствовать следующим требованиям:

- Таблицы должны быть в 4NF
- Каждая нетривиальная зависимость соединения в ней определяется потенциальным ключом этого отношения

Декомпозиция без потерь - процесс разбиения одной таблицы на несколько, при условии, что в случае соединения таблиц, которые были получены в результате декомпозиции, будет формироваться та же информация, что и в исходной таблице до декомпозиции.

### Шестая нормальная форма (6NF)

Таблицы должны соответствовать следующим требованиям:

- Таблицы должны быть в 5NF
- Таблицы не могут быть подвержены дальнейшей декомпозиции без потерь данных